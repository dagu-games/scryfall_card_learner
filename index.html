<!DOCTYPE html>
<html>
<body>
  <link rel="icon" href="https://dagu-games.github.io/scryfall_card_learner/favicon.ico">
  <script src="./lib/vue.js"></script>
  <script language="javascript" src="./lib/lz-string.js"></script>
  <script src="https://kit.fontawesome.com/554f8d51c3.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="style_mobile.css">


  <div id="app">
    <div>



      <div class="top_bar" style="white-space: pre;">
        <i class="fas fa-cog" v-on:click="toggle_settings()"></i><i class="fas fa-question-circle" v-on:click="toggle_help()"></i>     Current Round: {{round+1}}     Current Card: {{current_card+1}} / {{cards.length}}     {{Math.round((current_card / cards.length)*100)}}%</pre>
      </div>

      <div class="settings_container">
        <div v-if="!is_settings_hidden()">
          <div>



            <br>

            Seed String
            <input v-model="seed_string" placeholder="example: legal:modern">
            <br>
            Seed Number
            <input v-model="seed_number" placeholder="example: 100">
            <br>
            Sort by
            <select v-model="seed_sort">
              <option>name</option>
              <option>set</option>
              <option>released</option>
              <option>rarity</option>
              <option>color</option>
              <option>usd</option>
              <option>tix</option>
              <option>eur</option>
              <option>cmc</option>
              <option>power</option>
              <option>toughness</option>
              <option>edhrec</option>
              <option>artist</option>
            </select>
            <br>
            Ascending or Descending
            <select v-model="seed_direction">
              <option>auto</option>
              <option>asc</option>
              <option>desc</option>
            </select><br>
            Unique by
            <select v-model="seed_unique">
              <option>art</option>
              <option>cards</option>
              <option>prints</option>
            </select>
            <br>
            <button v-on:click="seed_cards()">Seed Cards</button><br>


            <br>
            Add Cards
            <input v-model="add_count" placeholder="example: 100">
            <button v-on:click="add_n_cards()">Add Cards</button>
            <br>
            <br>
            <input type="checkbox" id="hard_mode_checkbox" v-model="hard_mode">
            <label for="hard_mode_checkbox">Hard Mode</label>
            <br>
            <br>
            Question Types
            <br>
            <input type="checkbox" id="name_checkbox" v-model="possible_questions.name">
            <label for="name_checkbox">Name</label>
            <br>
            <input type="checkbox" id="mana_cost_checkbox" v-model="possible_questions.mana_cost">
            <label for="mana_cost_checkbox">Mana Cost</label>
            <br>
            <input type="checkbox" id="type_checkbox" v-model="possible_questions.type">
            <label for="type_checkbox">Type</label>
            <br>
            <input type="checkbox" id="oracle_text_checkbox" v-model="possible_questions.oracle_text">
            <label for="oracle_text_checkbox">Oracle Text</label>
            <br>

            <br><br>
            <button v-on:click="downloadData()">Download Save Data</button>
            <br><br>
            <div>
              <label for="input-file">Load save file:</label><br>
              <input type="file" id="input-file" v-on:change="uploadData($event)">
            </div>
            <br><br><br>
            <button v-on:click="clearData()">Delete Save Data</button>
            <br>




          </div>
        </div>
      </div>

      <div v-if="!showResults() && is_settings_hidden()">
        <div class="question_container">
          <div class="left_section">



            <h2>
              {{ current_question_type == "name" ? "What is the name of this card?" : ""}}
              {{ current_question_type == "type" ? "What is this card's type?" : ""}}
              {{ current_question_type == "mana_cost" ? "What is the mana cost for this card?" : ""}}
              {{ current_question_type == "oracle_text" ? "What is the rules text for this card?" : ""}}
            </h2>



            <table>
              <tr style="width:100%;">
                <td style="width:75%;" v-html='getHTML("name")'></td>
                <td style="width:25%;" v-html='getHTML("mana_cost")'></td>
              </tr>
              <tr style="width:100%;">
                <td colspan="2"><img v-for="art_link in cards[question_order[current_card]].art_links" style="width:100%;" :src="art_link" :alt="'oops'" /></td>
              </tr>
              <tr style="width:100%;">
                <td colspan="2" v-html='getHTML("type")'></td>
              </tr>
              <tr style="width:100%;">
                <td colspan="2" v-html='getHTML("oracle_text")'></td>
              </tr>
            </table>



          </div>
          <div class="right_section">



            <table>
              <tr>
                <td>
                  <button v-bind:class="{ centered: true, oracle_text_option: current_question_type == 'oracle_text' }" v-on:click="answer_question(0)"><span style="white-space: pre-wrap;" v-html='getHTML("option1")'></span></button>
                </td>
                <td>
                  <button v-bind:class="{ centered: true, oracle_text_option: current_question_type == 'oracle_text' }" v-on:click="answer_question(1)"><span style="white-space: pre-wrap;" v-html='getHTML("option2")'></span></button>
                </td>
              </tr>
              <tr>
                <td>
                  <button v-bind:class="{ centered: true, oracle_text_option: current_question_type == 'oracle_text' }" v-on:click="answer_question(2)"><span style="white-space: pre-wrap;" v-html='getHTML("option3")'></span></button>
                </td>
                <td>
                  <button v-bind:class="{ centered: true, oracle_text_option: current_question_type == 'oracle_text' }" v-on:click="answer_question(3)"><span style="white-space: pre-wrap;" v-html='getHTML("option4")'></span></button>
                </td>
              </tr>
            </table>




          </div>
        </div>
      </div>
      <div v-if="showResults() && is_settings_hidden()">
        <div class="results_container">


          <h2>{{previous_cards[0].correct ? "Correct" : "Wrong"}}</h2>
          <img v-for="card_link in previous_cards[0].links" :src="card_link" :alt="'oops'" />
          <button v-on:click="dismissResults()">Next Question</button>


        </div>
      </div>

      <div>
        <div v-if="!is_help_hidden()">
          <div class="help_container">
            <i style="float:right;" class="fas fa-times" v-on:click="toggle_help()"></i>
            <h2>Help</h2>
            This is a tool to help you memorize Magic: The Gathering cards.
            The program works by pulling cards from Scryfall.com.
            It loads in a number of seed cards that are determined by the seed string.
            If you get a question wrong, you will start the current list of cards over from the beginning.
            If you get every question right and make it to the end of the round, a new card will be added to the set.
            Cards get added according to the query as specified in the settings and can be changed at any time.

            <h3>Seed String</h3>
            This is the query used to search scryfall for cards to memorize. You can use any normal Scryfall syntax to limit the pool of cards.
            <a href="https://scryfall.com/docs/syntax">Click Here for more syntax info for pulling cards from Scryfall</a>

            <h3>Seed Number</h3>
            This is the number of cards pulled to populate the inital pool of cards. Normally this number is 100 and shouldn't ever be below 10.

            <h3>Sort By</h3>
            This is the method to sort cards by when pulling from Scryfall.

            <h3>Unique By</h3>
            This is the method to remove duplicates. "art" means to only show dupes if there is different art, "cards" means no dupes, and "prints" means all reprints are included.

            <h3>Seed Cards</h3>
            This is the button that re-seeds the cards in the set. Use this to reset your progress and start memorizing a new set of cards.

            <h3>Question Types</h3>
            This allows you to disable or enable certain question types. If you do not want to be asked about the mana cost of cards, simply deselect the checkbox for Mana Cost.

            <h3>Download Save Data</h3>
            This allows you to save your progress to a file that can then be imported later to resume where you left off. This is useful for changing what computer you are on or backing up your progress.

            <h3>Load Save File</h3>
            This allows you to upload your save file to resume where you left off.

            <h3>Delete Save Data</h3>
            This will delete all of your progress!!! Use with caution!!!
          </div>
        </div>
      </div>

    </div>
  </div>

  <script src="./symbols.js"></script>
  <script src="./main.js"></script>
</body>

</html>
